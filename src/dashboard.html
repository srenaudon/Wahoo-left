<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <!-- libs -->
    <script src="./lib/jquery/jquery-2.2.0.min.js"></script>
    <script src="./lib/gridster/jquery.gridster.min.js"></script>
    <script src="./lib/kendoui/js/kendo.all.min.js"></script>

    <!--  Ec3 dashboard -->
    <script src="./js/common.js"></script>
    <script src="./js/layout.js"></script>
    <script src="./js/kpi-activity.js"></script>
    <script src="./js/kpi-average-speed.js"></script>
    <script src="./js/kpi-operators-load-factor.js"></script>
    <script src="js/kpi-alert-event-backlog.js"></script>

    <!-- libs  styles -->
    <link href="./lib/kendoui/styles/kendo.common.min.css" rel="stylesheet" type="text/css">
    <link href="./lib/kendoui/styles/kendo.metroblack.min.css" rel="stylesheet" type="text/css">
    <link href="./lib/gridster/jquery.gridster.min.css" rel="stylesheet" type="text/css">

    <!-- Ec3  styles -->
    <link href="./css/ec3/ec3.min.css" rel="stylesheet" type="text/css">
    <link href="./css/wa/wa.css" rel="stylesheet" type="text/css">

</head>


<body>
<div class="wa-grid gridster">
    <ul>
        <li  data-row="1" data-col="1" data-sizex="1" data-sizey="1">
            <div class="wa-grid-cell">
                <div class="wa-kpi-title">
                    <h3 >Activity since last hour</h3>
                </div>
                <div class="wa-kpi" id="wa-kpi-activity"></div>
            </div>
        </li>
        <li  data-row="1" data-col="2" data-sizex="1" data-sizey="1">
            <div class="wa-grid-cell">
                <div class="wa-kpi-title">
                    <h3 >Average speed in km/h</h3>
                </div>
            <div class="wa-kpi" id="wa-kpi-average-speed"></div>
            </div>
        </li>
        <li  data-row="1" data-col="3" data-sizex="1" data-sizey="1">
            <div class="wa-grid-cell">
                <div class="wa-kpi-title">
                    <h3 >Operators load factor</h3>
                </div>
            <div class="wa-kpi" id="wa-kpi-operators-load-factor">
                <div id="wa-kpi-supervisor-load-factor" class="wa-kpi-operators-load-factor"></div>
                <div id="wa-kpi-liaison-officer-load-factor" class="wa-kpi-operators-load-factor"></div>
                <div id="wa-kpi-call-taker-load-factor" class="wa-kpi-operators-load-factor"></div>

            </div>
            </div>
        </li>
        <li  data-row="2" data-col="1" data-sizex="1" data-sizey="1">
            <div class="wa-grid-cell">
                <div class="wa-kpi-title">
                    <h3 >Alarms and events backlog</h3>
                </div>
            <div class="wa-kpi" id="wa-kpi-alert-event-backlog"></div>
            </div>
        </li>
        <li  data-row="2" data-col="2" data-sizex="1" data-sizey="1">
            <div class="wa-grid-cell">
                <div class="wa-kpi-title">
                    <h3 >Active Taxis</h3>
                </div>
            <div class="wa-kpi" id="taxi-trips"></div>
            </div>
        </li>
        <li  data-row="2" data-col="3" data-sizex="1" data-sizey="1">
            <div class="wa-grid-cell">
                <div class="wa-kpi-title">
                    <h3 >Bus occupancy</h3>
                </div>
            <div class="wa-kpi" id="bus-occupancy" style="padding-top:150px;width:450px;height:50px"></div>
            </div>
        </li>

    </ul>
</div>

<script>


    $(function () {




        /* Taxi trip KPI */
        function createTaxiTrip() {
            $("#taxi-trips").kendoChart({
                title: {
                    text: "Activity since last hour"
                },
                legend: {
                    position: "bottom",
                    labels: {
                        color: '#fff'
                    }

                },
                chartArea: {
                    background: ""
                },
                seriesDefaults: {
                    type: "line",
                    style: "smooth"
                },
                series: [{
                    name: "taxi trip",
                    data: [700,800,2000,2200,2300,2180,1900,1800,1649,1300,1240,1319,1450,1800,1900,2000,2300,2000,1900,1300,1100,800]
                }],
                valueAxis: {
                    labels: {
                        format: "{0}",
                        color: '#fff'
                    },
                    line: {
                        visible: false
                    },
                    axisCrossingValue: 0
                },
                categoryAxis: {
                    categories: [0, 4, 8, 12, 16, 20, 24],
                    majorGridLines: {
                        visible: false
                    },
                    labels: {
                        rotation: "auto",
                        color: '#fff'
                    }
                },
                tooltip: {
                    visible: true,
                    format: "{0}",
                    template: "#= series.name #: #= value #"
                }

            });
        }

        createTaxiTrip();
    });

    /* Bus line occupancy */
    $("#bus-occupancy").kendoChart({
        legend: {
            visible: false
        },
        series: [{
            type: "bullet",
            data: [[1450, 1300]]
        }],
        categoryAxis: {
            majorGridLines: {
                visible: false
            },
            majorTicks: {
                visible: false
            }
        },
        valueAxis: [{
            plotBands: [{
                from: 0, to: 500, color: "yellow", opacity: .3
            }, {
                from: 500, to: 1500, color: "orange", opacity: .3
            }, {
                from: 1500, to: 2000, color: "red", opacity: .3
            }],
            majorGridLines: {
                visible: false
            },
            min: 0,
            max: 2000,
            minorTicks: {
                visible: false
            }
        }],
        tooltip: {
            visible: true,
            template: "Maximum: #= value.target # <br /> Average: #= value.current #"
        }
    });



</script>
</body>
</html>